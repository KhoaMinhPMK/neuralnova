<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thanh toán | NeuralNova</title>
  <link rel="icon" type="image/x-icon" href="../../assets/images/logo.ico" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Icons -->
  <script src="https://unpkg.com/lucide@latest" defer></script>

  <!-- Global variables (colors) -->
  <link rel="stylesheet" href="../../assets/css/variables.css" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="pay-header">
    <a href="../../index.html" class="brand">
      <img src="../../assets/images/logo.png" alt="NeuralNova" />
      <span>NeuralNova</span>
    </a>
    <a class="back-link" href="javascript:history.back()">
      <i data-lucide="arrow-left"></i>
      Trở lại
    </a>
  </header>

  <main class="container">
    <section class="card checkout">
      <div class="left">
        <h1>Thanh toán</h1>
        <p class="sub">Vui lòng nhập thông tin thanh toán an toàn của bạn.</p>

        <div class="tabs" role="tablist">
          <button class="tab active" data-tab="card" aria-selected="true">
            <i data-lucide="credit-card"></i>
            Thẻ tín dụng/ghi nợ
          </button>
          <button class="tab" data-tab="wallet">
            <i data-lucide="wallet"></i>
            Ví NeuralNova
          </button>
        </div>

        <form id="card-form" class="form form--active" autocomplete="cc-number">
          <div class="field">
            <label>Họ và tên</label>
            <input id="name" type="text" placeholder="Nguyễn Văn A" required />
            <span class="err" data-for="name"></span>
          </div>
          <div class="field">
            <label>Email</label>
            <input id="email" type="email" placeholder="ban@vidu.com" required />
            <span class="err" data-for="email"></span>
          </div>
          <div class="field">
            <label>Số thẻ</label>
            <input id="cardNumber" inputmode="numeric" autocomplete="cc-number" placeholder="1234 5678 9012 3456" maxlength="19" required />
            <span class="err" data-for="cardNumber"></span>
          </div>
          <div class="row">
            <div class="field">
              <label>Hết hạn (MM/YY)</label>
              <input id="expiry" inputmode="numeric" autocomplete="cc-exp" placeholder="MM/YY" maxlength="5" required />
              <span class="err" data-for="expiry"></span>
            </div>
            <div class="field">
              <label>CVC</label>
              <input id="cvc" inputmode="numeric" autocomplete="cc-csc" placeholder="123" maxlength="4" required />
              <span class="err" data-for="cvc"></span>
            </div>
          </div>

          <div class="field">
            <label>Mã giảm giá (tuỳ chọn)</label>
            <div class="input-group">
              <input id="voucher" placeholder="NHAPMA" />
              <button type="button" id="applyVoucher" class="btn ghost">Áp dụng</button>
            </div>
            <span class="help">Dùng query ?voucher=... để tự động áp dụng.</span>
          </div>

          <button id="payBtn" class="btn primary full" type="submit">
            <span class="btn-text">Thanh toán</span>
            <span class="btn-spinner" aria-hidden="true"></span>
          </button>
          <p class="terms">Bằng việc thanh toán, bạn đồng ý với Điều khoản dịch vụ và Chính sách bảo mật.</p>
        </form>

        

        <div id="wallet-form" class="wallet" hidden>
          <div class="wallet-box">
            <h3>Ví NeuralNova</h3>
            <div class="wallet-balance">Số dư hiện tại: <strong id="walletBalance">0₫</strong></div>
            <div class="wallet-actions">
              <button id="payByWallet" class="btn primary">Thanh toán bằng Ví</button>
            </div>

            <div class="wallet-tabs" role="tablist">
              <button class="wallet-tab active" data-subtab="topup">Nạp tiền</button>
              <button class="wallet-tab" data-subtab="history">Lịch sử</button>
            </div>

            <!-- Nạp tiền -->
            <section id="walletTopup" class="wallet-section" aria-labelledby="tab-topup">
              <p class="help" style="margin:0 0 10px">
                Cần trợ giúp? Xem <a href="guide.html" style="color:#a5b4fc;text-decoration:underline">Hướng dẫn thanh toán</a>.
              </p>
              <div class="provider-groups">
                <div class="group">
                  <div class="group-title">Giao dịch P2P - VND</div>
                  <div class="provider-row">
                    <button class="provider-btn" data-provider="bank"><img src="../../assets/images/payments/bank.svg" alt="Bank"/> <span>Chuyển khoản</span></button>
                    <button class="provider-btn active" data-provider="momo"><img src="../wallet/logopay/MoMo_Logo.png" alt="MoMo"/> <span>MoMo</span></button>
                    <button class="provider-btn" data-provider="zalopay"><img src="../wallet/logopay/zalopay-logo.png" alt="ZaloPay"/> <span>ZaloPay</span></button>
                    <button class="provider-btn" data-provider="vnpay"><img src="../wallet/logopay/vnpay%20logo.png" alt="VNPay"/> <span>VNPay</span></button>
                  </div>
                  <div class="provider-actions">
                    <a id="providerDetailLink" class="link-detail" href="method.html?provider=momo">Nhập thông tin chi tiết</a>
                  </div>
                </div>
                  <div class="group">
                  <div class="group-title">Giao dịch P2P - Quốc tế</div>
                  <div class="provider-row">
                    <button class="provider-btn" data-provider="paypal"><img src="../wallet/logopay/paypal%20logo.png" alt="PayPal"/> <span>PayPal</span></button>
                  </div>
                  <div class="provider-actions">
                    <a class="link-detail" href="method.html?provider=alipay&return=index.html#wallet">Nhập thông tin chi tiết Alipay</a>
                  </div>
                </div>
              </div>

              <div class="topup-controls">
                <div class="topup-field">
                  <label>Số tiền (VND)</label>
                  <input id="topupAmount" placeholder="Ví dụ: 100000" inputmode="numeric" />
                </div>
                <div class="topup-field">
                  <label>Ghi chú/Nội dung</label>
                  <input id="topupNote" placeholder="Ví dụ: nap_vi_user123" />
                </div>
              </div>

              <div class="qr-topup">
                <div id="qrTopup" class="qr-placeholder">QR sẽ hiển thị tại đây</div>
                <div class="payload">
                  <label>Nội dung mã (demo)</label>
                  <textarea id="topupPayload" readonly></textarea>
                </div>
              </div>
              <div class="topup-actions">
                <button id="genTopupBtn" class="btn">Tạo mã QR</button>
                <button id="confirmTopupBtn" class="btn primary">Tôi đã thanh toán</button>
                <button id="copyTopupBtn" class="btn ghost">Sao chép</button>
              </div>
            </section>

            <!-- Lịch sử -->
            <section id="walletHistory" class="wallet-section" hidden>
              <div class="history">
                <div class="history-head">
                  <div>Thời gian</div>
                  <div>Nhà cung cấp</div>
                  <div>Số tiền</div>
                  <div>Trạng thái</div>
                </div>
                <div id="historyList" class="history-body"></div>
              </div>
            </section>
          </div>
        </div>
      </div>

      <aside class="right">
        <div class="summary">
          <h2>Tóm tắt đơn hàng</h2>
          <div class="line">
            <span class="label" id="itemName">Gói dịch vụ</span>
            <span class="value" id="itemPrice">0₫</span>
          </div>
          <div class="line small">
            <span class="label">Số lượng</span>
            <span class="value" id="itemQty">1</span>
          </div>
          <div class="line small">
            <span class="label">Giảm giá</span>
            <span class="value" id="discount">- 0₫</span>
          </div>
          <div class="divider"></div>
          <div class="line total">
            <span>Tổng cộng</span>
            <strong id="grandTotal">0₫</strong>
          </div>
          <p class="secure"><i data-lucide="shield"></i> Thanh toán bảo mật với mã hoá TLS</p>
        </div>
      </aside>
    </section>
  </main>

  <div id="toast" role="status" aria-live="polite"></div>

  <script src="app.js"></script>
</body>
</html>
