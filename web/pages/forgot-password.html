<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Quên mật khẩu - NeuralNova">
  <title>Quên mật khẩu - NeuralNova</title>

  <link rel="stylesheet" href="../assets/css/reset.css">
  <link rel="stylesheet" href="../assets/css/variables.css">
  <link rel="stylesheet" href="../assets/css/base.css">
  <link rel="stylesheet" href="../assets/css/components.css">
  <link rel="stylesheet" href="../assets/css/layout.css">
  <link rel="stylesheet" href="../assets/css/responsive.css">

  <link rel="icon" type="image/x-icon" href="../assets/images/logo.ico">

  <style>
    :root { --login-bg: #0f0a1f; --login-panel: #1b1233; --login-input: #281b4f; --login-text: #e5e7eb; --login-muted: #a3a3a3; --login-primary: #7c3aed; --login-primary-2: #22d3ee; }
    body { background: var(--login-bg); }
    .auth-split { min-height: 100vh; display: grid; grid-template-columns: 1.2fr 1fr; }
    .auth-left { position: relative; overflow: hidden; display:flex; align-items:flex-end; }
    .auth-left::before { content:""; position:absolute; inset:0; background: url('../assets/images/Background Image.png') center/cover no-repeat; filter: saturate(110%); }
    .auth-left::after { content:""; position:absolute; inset:0; background: linear-gradient(90deg, rgba(15,10,31,.85), rgba(15,10,31,.35)); }
    .left-content { position:relative; color:#fff; padding: 6vh 6vw; }
    .left-slogan { font-size: clamp(1.4rem, 1.1rem + 1.2vw, 2.2rem); font-weight: 800; letter-spacing:.4px; }
    .left-slogan em { color: var(--login-primary-2); font-style: normal; }
    .auth-right { display:flex; align-items:center; justify-content:center; padding: 6vh 6vw; background: linear-gradient(180deg, rgba(27,18,51,.9), rgba(27,18,51,.9)); }
    .auth-card { width:100%; max-width: 420px; color: var(--login-text); }
    .brand { display:flex; align-items:center; gap:.6rem; color: var(--login-text); text-decoration:none; margin-bottom: 24px; }
    .brand img { width:28px; height:28px; }
    .auth-title { margin:0 0 8px; font-size: clamp(2rem, 1.5rem + 1.5vw, 2.4rem); font-weight: 800; color:#fff; }
    .auth-subtitle { color: var(--login-muted); margin-bottom: 18px; }
    .form-row { margin-bottom: 14px; }
    .form-label { display:block; margin-bottom: 6px; color: var(--login-muted); font-weight: 600; }
    .form-input { width: 100%; padding: 14px 14px; background: var(--login-input); border: 1px solid transparent; border-radius: 14px; color: var(--login-text); }
    .form-input::placeholder { color: #b7b7c3; }
    .form-input:focus { outline:none; border-color: #8b5cf6; box-shadow: 0 0 0 3px rgba(139,92,246,.25); }
    .form-actions { margin-top: 16px; display:flex; flex-direction:column; gap:12px; }
    .btn-primary { width: 100%; padding: 14px 16px; background: linear-gradient(90deg, var(--login-primary), var(--login-primary-2)); color:#fff; border:none; border-radius: 16px; font-weight: 700; cursor:pointer; }
    .btn-primary:hover { filter: brightness(1.05); }
    .helper { text-align:center; color: var(--login-muted); }
    .toast { display:none; border-radius: 12px; padding:.75rem .9rem; font-size:.95rem; }
    .toast.success { display:block; background:#0f3d2e; color:#b7f7d0; border:1px solid #1c7a5b; }
    .toast.error { display:block; background:#3b0a0a; color:#fecaca; border:1px solid #7f1d1d; }
    @media (max-width: 900px) { .auth-split { grid-template-columns: 1fr; } .auth-left { min-height: 36vh; } }
  </style>
</head>
<body>
  <main class="auth-split">
    <aside class="auth-left">
      <div class="left-content">
        <a class="brand" href="../index.html">
          <img src="../assets/images/logo.png" alt="NeuralNova">
          <strong style="letter-spacing:.3px; white-space:nowrap;">NeuralNova</strong>
        </a>
        <h2 class="left-slogan">SIGN IN TO YOUR <em>ADVENTURE!</em></h2>
      </div>
    </aside>
    <section class="auth-right">
      <div class="auth-card" aria-labelledby="auth-title">
        <header class="auth-header">
          <h1 id="auth-title" class="auth-title">FORGOT PASSWORD</h1>
          <p class="auth-subtitle">Enter your email to receive reset link</p>
        </header>

        <div id="fpToast" class="toast" role="alert" aria-live="polite"></div>

        <form id="forgotForm" novalidate>
          <div class="form-row" id="row-email">
            <label class="form-label" for="email">Email</label>
            <input class="form-input" type="email" id="email" name="email" placeholder="yourname@gmail.com" autocomplete="email" required aria-required="true" />
          </div>

          <div class="form-actions">
            <button id="btnSubmitForgot" class="btn-primary" type="submit">Send reset link</button>
            <p class="helper">Nhớ mật khẩu rồi? <a href="./login.html">Đăng nhập</a></p>
            <p class="helper">Đã nhận email? <a href="./verify-code.html">Nhập mã xác nhận</a></p>
          </div>
        </form>
      </div>
    </section>
  </main>

  <script type="module">
    const el = (s) => document.querySelector(s);
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i;
    const showToast = (msg, type='success') => { const t = el('#fpToast'); t.className = `toast ${type}`; t.textContent = msg; };

    const simulateSend = (email) => new Promise((resolve, reject) => {
      setTimeout(() => { email.toLowerCase().includes('fail') ? reject(new Error('Không tìm thấy tài khoản')) : resolve(true); }, 700);
    });

    document.addEventListener('DOMContentLoaded', () => {
      const form = el('#forgotForm');
      const btn = el('#btnSubmitForgot');
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        showToast('', '');
        const email = el('#email').value.trim();
        if (!emailRegex.test(email)) { showToast('Email không hợp lệ.', 'error'); return; }
        const original = btn.textContent; btn.textContent = 'Đang gửi...'; btn.disabled = true;
        try {
          await simulateSend(email);
          showToast('Đã gửi liên kết đặt lại mật khẩu. Vui lòng kiểm tra email.', 'success');
        } catch (err) {
          showToast(err.message || 'Có lỗi xảy ra.', 'error');
        } finally {
          btn.textContent = original; btn.disabled = false;
        }
      });
    });
  </script>
</body>
</html>

